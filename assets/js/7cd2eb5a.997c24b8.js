"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[868],{4213:(n,e,t)=>{t.d(e,{R:()=>o,x:()=>l});var i=t(6672);const r={},a=i.createContext(r);function o(n){const e=i.useContext(a);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:o(n.components),i.createElement(a.Provider,{value:e},n.children)}},6384:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>s,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"\u5f00\u53d1/\u540e\u7aef/Go/\u6846\u67b6\u5b66\u4e60/gin\u6846\u67b6\u8def\u7531\u5b66\u4e60","title":"gin\u6846\u67b6\u8def\u7531\u5b66\u4e60","description":"Gin \u662f\u4ec0\u4e48","source":"@site/docs/\u5f00\u53d1/\u540e\u7aef/Go/\u6846\u67b6\u5b66\u4e60/gin\u6846\u67b6\u8def\u7531\u5b66\u4e60.md","sourceDirName":"\u5f00\u53d1/\u540e\u7aef/Go/\u6846\u67b6\u5b66\u4e60","slug":"/\u5f00\u53d1/\u540e\u7aef/Go/\u6846\u67b6\u5b66\u4e60/gin\u6846\u67b6\u8def\u7531\u5b66\u4e60","permalink":"/docs/\u5f00\u53d1/\u540e\u7aef/Go/\u6846\u67b6\u5b66\u4e60/gin\u6846\u67b6\u8def\u7531\u5b66\u4e60","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/\u5f00\u53d1/\u540e\u7aef/Go/\u6846\u67b6\u5b66\u4e60/gin\u6846\u67b6\u8def\u7531\u5b66\u4e60.md","tags":[],"version":"current","frontMatter":{"title":"gin\u6846\u67b6\u8def\u7531\u5b66\u4e60"},"sidebar":"tutorialSidebar","previous":{"title":"Hertz","permalink":"/docs/\u5f00\u53d1/\u540e\u7aef/Go/\u6846\u67b6\u5b66\u4e60/Hertz"},"next":{"title":"\u73af\u5883\u914d\u7f6e","permalink":"/docs/\u5f00\u53d1/\u540e\u7aef/Go/\u73af\u5883\u914d\u7f6e"}}');var r=t(3420),a=t(4213);const o={title:"gin\u6846\u67b6\u8def\u7531\u5b66\u4e60"},l=void 0,s={},c=[{value:"Gin \u662f\u4ec0\u4e48",id:"gin-\u662f\u4ec0\u4e48",level:2},{value:"GET\u65b9\u6cd5",id:"get\u65b9\u6cd5",level:2},{value:"API\u53c2\u6570\u83b7\u53d6",id:"api\u53c2\u6570\u83b7\u53d6",level:3},{value:"URL\u53c2\u6570",id:"url\u53c2\u6570",level:3},{value:"POST\u65b9\u6cd5",id:"post\u65b9\u6cd5",level:2},{value:"\u53c2\u6570\u4f20\u9012",id:"\u53c2\u6570\u4f20\u9012",level:3},{value:"BindJSON\u65b9\u6cd5",id:"bindjson\u65b9\u6cd5",level:4},{value:"PostForm\u65b9\u6cd5",id:"postform\u65b9\u6cd5",level:4},{value:"BindXML\u65b9\u6cd5",id:"bindxml\u65b9\u6cd5",level:4},{value:"\u6587\u4ef6\u4f20\u8f93",id:"\u6587\u4ef6\u4f20\u8f93",level:3},{value:"\u53c2\u8003\u6587\u6863",id:"\u53c2\u8003\u6587\u6863",level:2}];function d(n){const e={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.h2,{id:"gin-\u662f\u4ec0\u4e48",children:"Gin \u662f\u4ec0\u4e48"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Gin\u662f\u4e00\u4e2agolang\u7684\u5fae\u6846\u67b6\uff0c\u5c01\u88c5\u6bd4\u8f83\u4f18\u96c5\uff0cAPI\u53cb\u597d\uff0c\u6e90\u7801\u6ce8\u91ca\u6bd4\u8f83\u660e\u786e\uff0c\u5177\u6709\u5feb\u901f\u7075\u6d3b\uff0c\u5bb9\u9519\u65b9\u4fbf\u7b49\u7279\u70b9"}),"\n",(0,r.jsxs)(e.li,{children:["\u5bf9\u4e8egolang\u800c\u8a00\uff0cweb\u6846\u67b6\u7684\u4f9d\u8d56\u8981\u8fdc\u6bd4Python\uff0cJava\u4e4b\u7c7b\u7684\u8981\u5c0f\u3002\u81ea\u8eab\u7684",(0,r.jsx)(e.code,{children:"net/http"}),"\u8db3\u591f\u7b80\u5355\uff0c\u6027\u80fd\u4e5f\u975e\u5e38\u4e0d\u9519"]}),"\n",(0,r.jsx)(e.li,{children:"\u501f\u52a9\u6846\u67b6\u5f00\u53d1\uff0c\u4e0d\u4ec5\u53ef\u4ee5\u7701\u53bb\u5f88\u591a\u5e38\u7528\u7684\u5c01\u88c5\u5e26\u6765\u7684\u65f6\u95f4\uff0c\u4e5f\u6709\u52a9\u4e8e\u56e2\u961f\u7684\u7f16\u7801\u98ce\u683c\u548c\u5f62\u6210\u89c4\u8303\n\u7b80\u5355\u793a\u4f8b"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-go",children:' package main\n\nimport (\n    "net/http"\n\n    "github.com/gin-gonic/gin"\n)\n\nfunc main() {\n    // 1.\u521b\u5efa\u8def\u7531\n   r := gin.Default()\n   // 2.\u7ed1\u5b9a\u8def\u7531\u89c4\u5219\uff0c\u6267\u884c\u7684\u51fd\u6570\n   // gin.Context\uff0c\u5c01\u88c5\u4e86request\u548cresponse\n   r.GET("/", func(c *gin.Context) {\n      c.String(http.StatusOK, "hello World!")\n   })\n   // 3.\u76d1\u542c\u7aef\u53e3\uff0c\u9ed8\u8ba4\u57288080\n   // Run("\u91cc\u9762\u4e0d\u6307\u5b9a\u7aef\u53e3\u53f7\u9ed8\u8ba4\u4e3a8080") \n   r.Run(":8000")\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"get\u65b9\u6cd5",children:"GET\u65b9\u6cd5"}),"\n",(0,r.jsx)(e.h3,{id:"api\u53c2\u6570\u83b7\u53d6",children:"API\u53c2\u6570\u83b7\u53d6"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-go",children:'package main\n\nimport (\n    "net/http"\n    "strings"\n\n    "github.com/gin-gonic/gin"\n)\n\nfunc main() {\n    r := gin.Default()\n    r.GET("/user/:name/*action", func(c *gin.Context) {\n        name := c.Param("name")\n        action := c.Param("action")\n        //\u622a\u53d6/\n        action = strings.Trim(action, "/")\n        c.String(http.StatusOK, name+" is "+action)\n    })\n    //\u9ed8\u8ba4\u4e3a\u76d1\u542c8080\u7aef\u53e3\n    r.Run(":8000")\n}\n'})}),"\n",(0,r.jsxs)(e.p,{children:["\u4ece\u8fd9\u91cc\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0c\u6709\u4e24\u79cd\u65b9\u6cd5\u6765\u83b7\u53d6API\u53c2\u6570\u3002\n",(0,r.jsx)(e.code,{children:":"}),"  ",(0,r.jsx)(e.code,{children:":name"}),"\u8868\u793a\u4e00\u4e2a\u547d\u540d\u53c2\u6570\n",(0,r.jsx)(e.code,{children:"*"})," ",(0,r.jsx)(e.code,{children:"/*action"}),"\u8868\u793a\u4e00\u4e2a\u53ef\u5305\u542b\u8def\u5f84\u5206\u9694\u7b26\u7684\u53c2\u6570\n",(0,r.jsx)(e.img,{src:"https://md-blog-images.oss-cn-beijing.aliyuncs.com/images/n1iiyS.png",alt:""}),"\n",(0,r.jsx)(e.code,{children:"c.Param"}),"\xa0\u65b9\u6cd5\u7684\u7b7e\u540d\u5982\u4e0b\uff1a"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-go",children:"func (c *Context) Param(key string) string\n"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"key"}),"\uff1a\u8fd9\u662f\u4f60\u8981\u4ece URL \u8def\u5f84\u4e2d\u83b7\u53d6\u7684\u53c2\u6570\u540d\u79f0\u3002"]}),"\n",(0,r.jsxs)(e.li,{children:["\u8fd4\u56de\u503c\uff1a\u8fd4\u56de\u4e0e\u6307\u5b9a\xa0",(0,r.jsx)(e.code,{children:"key"}),"\xa0\u5bf9\u5e94\u7684\u53c2\u6570\u503c\uff0c\u5982\u679c\u8be5\u53c2\u6570\u4e0d\u5b58\u5728\uff0c\u5c31\u4f1a\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32\u3002"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"url\u53c2\u6570",children:"URL\u53c2\u6570"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-go",children:'package main\n\nimport (\n    "fmt"\n    "net/http"\n    "github.com/gin-gonic/gin"\n)\n\nfunc main() {\n    r := gin.Default()\n    r.GET("/user", func(c *gin.Context) {\n        //\u6307\u5b9a\u9ed8\u8ba4\u503c\n        //http://localhost:8080/user \u624d\u4f1a\u6253\u5370\u51fa\u6765\u9ed8\u8ba4\u7684\u503c\n        name := c.DefaultQuery("name", "\u67af\u85e4")\n        c.String(http.StatusOK, fmt.Sprintf("hello %s", name))\n    })\n    r.Run()\n}\n'})}),"\n",(0,r.jsxs)(e.p,{children:["\u8fd9\u91cc\u5c31\u5f88\u7b80\u5355\u4e86\u76f4\u63a5\u4f7f\u7528",(0,r.jsx)(e.code,{children:"?"}),"\u4f20\u9012\u53c2\u6570\u5373\u53ef\u3002\n",(0,r.jsx)(e.code,{children:"DefaultQuery"}),"\xa0\u65b9\u6cd5\u7684\u7b7e\u540d\u5982\u4e0b\uff1a"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-go",children:"func (c *Context) DefaultQuery(key, defaultValue string) string\n"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"key"}),"\uff1a\u9700\u8981\u83b7\u53d6\u7684\u67e5\u8be2\u53c2\u6570\u7684\u540d\u79f0\u3002"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"defaultValue"}),"\uff1a\u5f53\u6307\u5b9a\u7684\u53c2\u6570\u4e0d\u5b58\u5728\u65f6\u8981\u8fd4\u56de\u7684\u9ed8\u8ba4\u503c\u3002"]}),"\n",(0,r.jsx)(e.li,{children:"\u8fd4\u56de\u503c\uff1a\u8fd4\u56de\u67e5\u8be2\u53c2\u6570\u7684\u503c\uff0c\u5982\u679c\u53c2\u6570\u4e0d\u5b58\u5728\u5219\u8fd4\u56de\u9ed8\u8ba4\u503c\u3002"}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"post\u65b9\u6cd5",children:"POST\u65b9\u6cd5"}),"\n",(0,r.jsx)(e.p,{children:"\u6211\u4eec\u5e38\u89c1\u7684post\u4f20\u8f93\u683c\u5f0f"}),"\n",(0,r.jsx)(e.h3,{id:"\u53c2\u6570\u4f20\u9012",children:"\u53c2\u6570\u4f20\u9012"}),"\n",(0,r.jsx)(e.h4,{id:"bindjson\u65b9\u6cd5",children:"BindJSON\u65b9\u6cd5"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"application/json"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-http",children:'POST /json HTTP/1.1\nHost: localhost:8080\nContent-Type: application/json\nContent-Length: 23\n\n{\n    "name": "John",\n    "age": 30\n}\n'})}),"\n",(0,r.jsx)(e.p,{children:"\u8fd9\u91cc\u4f7f\u7528BindJSON\u65b9\u6cd5"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-go",children:"func (c *Context) BindJSON(obj interface{}) error\n"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-go",children:'package main\n\nimport (\n    "net/http"\n\n    "github.com/gin-gonic/gin"\n)\n\ntype User struct {\n    Name string `json:"name"`\n    Age  int    `json:"age"`\n}\n\nfunc main() {\n    r := gin.Default()\n\n    r.POST("/json", func(c *gin.Context) {\n        var user User\n        if err := c.BindJSON(&user); err != nil {\n            c.JSON(http.StatusBadRequest, gin.H{"error": err.Error()})\n            return\n        }\n\n        c.JSON(http.StatusOK, gin.H{\n            "name": user.Name,\n            "age":  user.Age,\n        })\n    })\n\n    r.Run(":8080")\n}\n'})}),"\n",(0,r.jsx)(e.h4,{id:"postform\u65b9\u6cd5",children:"PostForm\u65b9\u6cd5"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"application/x-www-form-urlencoded"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-http",children:"POST /form HTTP/1.1\nHost: localhost:8080\nContent-Type: application/x-www-form-urlencoded\nContent-Length: 11\n\nname=John&age=30\n"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"multipart/form-data"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-http",children:'POST /form HTTP/1.1\nHost: localhost:8080\nContent-Type: multipart/form-data; boundary=---------------------------332943733314773\nContent-Length: 161\n\n-----------------------------332943733314773\nContent-Disposition: form-data; name="name"\n\nJohn\n-----------------------------332943733314773\nContent-Disposition: form-data; name="age"\n\n30\n-----------------------------332943733314773--\n'})}),"\n",(0,r.jsx)(e.p,{children:"\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528PostForm\u65b9\u6cd5"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-go",children:"func (c *Context) PostForm(key string) string\n"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-go",children:'package main\n\nimport (\n    "net/http"\n\n    "github.com/gin-gonic/gin"\n)\n\nfunc main() {\n    r := gin.Default()\n\n    r.POST("/form", func(c *gin.Context) {\n        name := c.PostForm("name")\n        age := c.PostForm("age")\n\n        c.JSON(http.StatusOK, gin.H{\n            "name": name,\n            "age":  age,\n        })\n    })\n\n    r.Run(":8080")\n}\n'})}),"\n",(0,r.jsx)(e.h4,{id:"bindxml\u65b9\u6cd5",children:"BindXML\u65b9\u6cd5"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"application/xml"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-http",children:"POST /xml HTTP/1.1\nHost: localhost:8080\nContent-Type: application/xml\nContent-Length: 103\n\n<Book>\n    <title>Go Programming</title>\n    <author>John Doe</author>\n    <year>2024</year>\n</Book>\n"})}),"\n",(0,r.jsxs)(e.p,{children:["\u6211\u4eec\u4f7f\u7528\xa0",(0,r.jsx)(e.code,{children:"BindXML"}),"\u65b9\u6cd5"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-go",children:"func (c *Context) BindXML(obj interface{}) error\n"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-go",children:'package main\n\nimport (\n    "net/http"\n\n    "github.com/gin-gonic/gin"\n)\n\n// Book \u5b9a\u4e49\u4e00\u4e2a\u7ed3\u6784\u4f53\u6765\u6620\u5c04XML\u6570\u636e\ntype Book struct {\n    Title  string `xml:"title"`\n    Author string `xml:"author"`\n    Year   int    `xml:"year"`\n}\n\nfunc main() {\n    r := gin.Default()\n\n    // \u5904\u7406POST\u8bf7\u6c42\n    r.POST("/xml", func(c *gin.Context) {\n        var book Book\n        // \u7ed1\u5b9aXML\u6570\u636e\u5230\u7ed3\u6784\u4f53\n        if err := c.BindXML(&book); err != nil {\n            c.JSON(http.StatusBadRequest, gin.H{"error": err.Error()})\n            return\n        }\n\n        // \u8fd4\u56de\u89e3\u6790\u7ed3\u679c\n        c.JSON(http.StatusOK, gin.H{\n            "title":  book.Title,\n            "author": book.Author,\n            "year":   book.Year,\n        })\n    })\n\n    // \u542f\u52a8\u670d\u52a1\u5668\n    r.Run(":8080")\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u6587\u4ef6\u4f20\u8f93",children:"\u6587\u4ef6\u4f20\u8f93"}),"\n",(0,r.jsx)(e.p,{children:"\u6211\u4eec\u4f7f\u7528FormFile\u51fd\u6570"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-go",children:"func (c *Context) FormFile(name string) (*multipart.FileHeader, error)\n"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-go",children:'package main\n\nimport (\n    "fmt"\n    "log"\n    "net/http"\n\n    "github.com/gin-gonic/gin"\n)\n\nfunc main() {\n    r := gin.Default()\n    r.POST("/upload", func(c *gin.Context) {\n        _, headers, err := c.Request.FormFile("file")\n        if err != nil {\n            log.Printf("Error when try to get file: %v", err)\n        }\n        //headers.Size \u83b7\u53d6\u6587\u4ef6\u5927\u5c0f\n        if headers.Size > 1024*1024*2 {\n            fmt.Println("\u6587\u4ef6\u592a\u5927\u4e86")\n            return\n        }\n        //headers.Header.Get("Content-Type")\u83b7\u53d6\u4e0a\u4f20\u6587\u4ef6\u7684\u7c7b\u578b\n        if headers.Header.Get("Content-Type") != "image/png" {\n            fmt.Println("\u53ea\u5141\u8bb8\u4e0a\u4f20png\u56fe\u7247")\n            return\n        }\n        c.SaveUploadedFile(headers, "./video/"+headers.Filename)\n        c.String(http.StatusOK, headers.Filename)\n    })\n    r.Run()\n}\n'})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-http",children:'POST /upload HTTP/1.1\nHost: localhost:8080\nContent-Type: multipart/form-data; boundary=---------------------------1234567890\n\n-----------------------------1234567890\nContent-Disposition: form-data; name="file"; filename="example.png"\nContent-Type: image/png\n\n\u8fd9\u91cc\u662f\u6587\u4ef6example.png\u7684\u4e8c\u8fdb\u5236\u5185\u5bb9\n-----------------------------1234567890--\n'})}),"\n",(0,r.jsx)(e.h2,{id:"\u53c2\u8003\u6587\u6863",children:"\u53c2\u8003\u6587\u6863"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.a,{href:"https://www.topgoer.com/gin%E6%A1%86%E6%9E%B6/%E7%AE%80%E4%BB%8B.html",children:"https://www.topgoer.com/gin%E6%A1%86%E6%9E%B6/%E7%AE%80%E4%BB%8B.html"})})]})}function h(n={}){const{wrapper:e}={...(0,a.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(d,{...n})}):d(n)}}}]);